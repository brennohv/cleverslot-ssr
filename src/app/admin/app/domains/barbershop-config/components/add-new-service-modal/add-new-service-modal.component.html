<lib-modal-body alignActions="end">
  <ng-container slot="modal-content">
    <form class="d-flex flex-column">
      <div class="row mb-4">
        <h4>
          <span
            [transloco]="
              I18N_PREFFIX + (isEditMode() ? 'title-edit' : 'title-add')
            "
          ></span>
        </h4>
      </div>
      <div class="row row-gap-2">
        <div class="col-lg-6 col-12">
          <lib-input
            placeholder="Name"
            [label]="I18N_PREFFIX + 'name-label' | transloco"
            [formControlRef]="newServiceForm.controls.name"
          >
          </lib-input>
        </div>
        <div class="col-lg-3 col-6">
          <lib-input
            matSuffix="payments"
            [type]="IInputType.NUMBER"
            placeholder="Value"
            [label]="I18N_PREFFIX + 'value-label' | transloco"
            [formControlRef]="newServiceForm.controls.value"
          >
          </lib-input>
        </div>

        <div class="col-lg-3 col-6">
          <lib-input
            matSuffix="currency_exchange"
            placeholder="Recurrency"
            [label]="I18N_PREFFIX + 'recurrency-label' | transloco"
            [formControlRef]="newServiceForm.controls.recurrency"
          >
          </lib-input>
        </div>
      </div>
      <div class="row row-gap-2">
        <div class="col-lg-6 col-12">
          <lib-input
            matSuffix="timelapse"
            [type]="IInputType.NUMBER"
            placeholder="Duration"
            [label]="I18N_PREFFIX + 'duration-label' | transloco"
            [formControlRef]="newServiceForm.controls.duration"
          >
          </lib-input>
        </div>
        <div class="col-lg-6 col-12">
          <lib-input
            matSuffix="percent"
            [type]="IInputType.NUMBER"
            placeholder="Professional percentage"
            [label]="I18N_PREFFIX + 'professional-percentage-label' | transloco"
            [formControlRef]="newServiceForm.controls.professionalPercentage"
          >
          </lib-input>
        </div>
      </div>
      <div class="row row-gap-3">
        <div class="col-lg-6 col-8">
          <lib-file-upload-input
            [hint]="'shared.upload-hint' | transloco : { size: maxSizeInMb }"
            [label]="I18N_PREFFIX + 'label-input-upload' | transloco"
            (filePreviewUrl)="onImageChange($event)"
            [formControlRef]="newServiceForm.controls.photo"
          >
          </lib-file-upload-input>
        </div>
        <div class="col-4">
          <img
            class="photo-preview rounded-circle"
            [src]="
              photoPreviewFromPhotoChange()
                ? photoPreviewFromPhotoChange()
                : (photoPreviewFromInjection() | getImgUrl)
            "
            alt="user-icon"
          />
        </div>
        <div class="col-12">
          <mat-form-field
            class="w-100"
            appearance="outline"
            [libSpinner]="isLoading()"
          >
            <mat-label
              ><span [transloco]="I18N_PREFFIX + 'label-employees'"></span
            ></mat-label>
            <mat-chip-grid #chipGrid aria-label="Barber selection">
              @for (professional of selectedProfessionals(); track $index) {
              <mat-chip-row (removed)="remove(professional)">
                <img
                  matChipAvatar
                  [src]="
                    professional.userBarber.photo?.url
                      | getImgUrl : '/assets/icons/avatar.svg'
                  "
                  alt=""
                />
                {{ professional.firstName }} {{ professional.lastName }}
                <button
                  matChipRemove
                  [attr.aria-label]="'remove ' + professional.firstName"
                >
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip-row>
              }
            </mat-chip-grid>
            <input
              name="barbersInput"
              [placeholder]="I18N_PREFFIX + 'label-employees' | transloco"
              #barbersInput
              [(ngModel)]="currentProfessionalModel"
              [matChipInputFor]="chipGrid"
              [matAutocomplete]="auto"
              [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              (matChipInputTokenEnd)="avoidAddByTypeInput($event)"
            />
            <mat-autocomplete
              #auto="matAutocomplete"
              (optionSelected)="selected($event)"
            >
              @for (professional of filteredProfessionals(); track professional)
              {
              <mat-option
                class="d-flex align-items-center"
                [value]="professional"
              >
                <img
                  class="photo"
                  [src]="
                    professional.userBarber.photo?.url
                      | getImgUrl : '/assets/icons/avatar.svg'
                  "
                  alt=""
                />
                {{ professional.firstName }} {{ professional.lastName }}
              </mat-option>
              }
            </mat-autocomplete>
          </mat-form-field>
        </div>
      </div>
    </form>
  </ng-container>

  <ng-container slot="modal-actions">
    <button mat-button (click)="close()">
      <span [transloco]="'shared.cancel'"></span>
    </button>
    <button
      [disabled]="newServiceForm.invalid"
      mat-raised-button
      (click)="createEditService()"
      color="primary"
      cdkFocusInitial
    >
      <span [transloco]="isEditMode() ? 'shared.edit' : 'shared.create'"></span>
    </button>
  </ng-container>
</lib-modal-body>
